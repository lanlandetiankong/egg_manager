# EggManager数据库结构文档

## 1.1 设计原则

本系统采用MYSQL数据库进行存储。根据实体关系分析结果，按照数据库标准范式要求，结合系统性能要求进行数据设计。

## 1.2数据分析

略

## 1.3 数据设计

### 1.3.1  数据基本表结构及存储设计

表名定义说明（参考以下说明，表名按功能业务定义统一定义前缀和后缀，表字段按照功能词的定义用“_”隔开，如：sys_task_t，这样有利于开发时一键生成对应的映射对象）：

系统表 sys_功能名_t

业务表：biz_+功能名_t

字典表：dict_item
#### 1.3.1.1  em_announcement

|         表名          |   em_announcement   |         描述         |  公告表   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | title | varchar | 255 | 否 |         | 标题 |
| 3 | key_word | varchar | 100 | 否 |         | 关键字 |
| 4 | publish_department | char | 36 | 否 |         | 发布的部门 |
| 5 | content | text |  | 否 |         | 内容 |
| 6 | tag_ids | varchar | 1000 | 否 |         | 公告标签 |
| 7 | accessory | varchar | 255 | 否 |         | 附件 |
| 8 | state | tinyint | 11 | 否 |         | 状态值 |
| 9 | remark | varchar | 255 | 否 |         | 备注 |
| 10 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 11 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 12 | create_time | datetime |  | 否 |         | 创建时间 |
| 13 | update_time | datetime |  | 否 |         | 修改时间 |
| 14 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.2  em_announcement_draft

|         表名          |   em_announcement_draft   |         描述         |     |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | title | varchar | 255 | 否 |         | 标题 |
| 3 | key_word | varchar | 100 | 否 |         | 关键字 |
| 4 | publish_department | char | 36 | 否 |         | 发布的部门 |
| 5 | content | text |  | 否 |         | 公告内容 |
| 6 | tag_ids | varchar | 1000 | 否 |         | 公告标签 |
| 7 | accessory | varchar | 255 | 否 |         | 附件 |
| 8 | is_published | tinyint | 11 | 否 |         | 是否已发布 |
| 9 | state | tinyint | 11 | 否 |         | 状态值 |
| 10 | remark | varchar | 255 | 否 |         | 备注 |
| 11 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 12 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 13 | create_time | datetime |  | 否 |         | 创建时间 |
| 14 | update_time | datetime |  | 否 |         | 修改时间 |
| 15 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.3  em_announcement_tag

|         表名          |   em_announcement_tag   |         描述         |     |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | name | varchar | 100 | 否 |         | 标签名 |
| 3 | description | varchar | 255 | 否 |         | 描述 |
| 4 | ordering | int | 11 | 否 |         | 排序 |
| 5 | state | tinyint | 11 | 否 |         | 状态值 |
| 6 | remark | varchar | 255 | 否 |         | 备注 |
| 7 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 8 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 9 | create_time | datetime |  | 否 |         | 创建时间 |
| 10 | update_time | datetime |  | 否 |         | 修改时间 |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.4  em_bill_record

|         表名          |   em_bill_record   |         描述         |     |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | bill_type | char | 36 | 否 |         | 订单类型 |
| 3 | unit_price | decimal | (10,2) | 否 |         | 单价 |
| 4 | quantity | decimal | (10,2) | 否 |         | 个数 |
| 5 | total_price | decimal | (10,2) | 否 |         | 总价 |
| 6 | record_time | datetime |  | 否 |         | 记录的时间 |
| 7 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.5  em_bill_type

|         表名          |   em_bill_type   |         描述         |  订单类型   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | varchar | 36 | 是 |         |  |
| 2 | name | varchar | 100 | 否 |         |  |
| 3 | type_num | int | 11 | 否 |         |  |
| 4 | default_unit_price | decimal | (10,2) | 否 |         | 默认单价 |
| 5 | remark | varchar | 255 | 否 |         |  |
| 6 | state | tinyint | 11 | 否 |         |  |
| 7 | create_time | datetime |  | 否 |         |  |
| 8 | update_time | datetime |  | 否 |         |  |
| 9 | create_user | varchar | 36 | 否 |         |  |
| 10 | last_modifyer | varchar | 36 | 否 |         |  |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.6  em_define_department

|         表名          |   em_define_department   |         描述         |  定义的部门   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | name | varchar | 255 | 否 |         | 部门名 |
| 3 | code | varchar | 255 | 否 |         | 部门code |
| 4 | parent_id | char | 36 | 否 |         | 上级id |
| 5 | level | int | 11 | 否 |         | 层级 |
| 6 | order_num | int | 11 | 否 |         | 排序值 |
| 7 | description | varchar | 255 | 否 |         | 描述 |
| 8 | state | tinyint | 11 | 否 |         | 状态值 |
| 9 | remark | varchar | 255 | 否 |         | 备注 |
| 10 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 11 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 12 | create_time | datetime |  | 否 |         | 创建时间 |
| 13 | update_time | datetime |  | 否 |         | 修改时间 |
| 14 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.7  em_define_group

|         表名          |   em_define_group   |         描述         |  定义的用户组   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | name | varchar | 255 | 否 |         | 组别名 |
| 3 | pid | char | 36 | 否 |         | 上级id |
| 4 | is_inherit | int | 11 | 否 |         | 是否继承 |
| 5 | type | varchar | 50 | 否 |         | 类型 |
| 6 | state | tinyint | 11 | 否 |         | 状态值 |
| 7 | remark | varchar | 255 | 否 |         | 备注 |
| 8 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 9 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 10 | create_time | datetime |  | 否 |         | 创建时间 |
| 11 | update_time | datetime |  | 否 |         | 修改时间 |
| 12 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.8  em_define_job

|         表名          |   em_define_job   |         描述         |     |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | name | varchar | 255 | 否 |         | 职务名 |
| 3 | type | int | 255 | 否 |         | 类型 |
| 4 | description | varchar | 255 | 否 |         | 描述 |
| 5 | state | tinyint | 11 | 否 |         | 状态值 |
| 6 | remark | varchar | 255 | 否 |         | 备注 |
| 7 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 8 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 9 | create_time | datetime |  | 否 |         | 创建时间 |
| 10 | update_time | datetime |  | 否 |         | 修改时间 |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.9  em_define_menu

|         表名          |   em_define_menu   |         描述         |  菜单表   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | parent_id | char | 36 | 否 |         | 上级id |
| 3 | menu_name | varchar | 255 | 否 |         | 菜单名 |
| 4 | label | varchar | 100 | 否 |         | label内容 |
| 5 | level | int | 11 | 否 |         | 级别 |
| 6 | icon_name | varchar | 100 | 否 |         | 图标值 |
| 7 | router_url | varchar | 255 | 否 |         | 跳转的路由url |
| 8 | href_url | varchar | 255 | 否 |         | 外部跳转的url |
| 9 | url_jump_type | int | 11 | 否 |         | 路径跳转的方式 |
| 10 | order_num | int | 11 | 否 |         | 排序值 |
| 11 | excel_model_conf | text |  | 否 |         | excel配置 |
| 12 | state | tinyint | 11 | 否 |         | 状态值 |
| 13 | remark | varchar | 255 | 否 |         | 备注 |
| 14 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 15 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 16 | create_time | datetime |  | 否 |         | 创建时间 |
| 17 | update_time | datetime |  | 否 |         | 修改时间 |
| 18 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.10  em_define_module

|         表名          |   em_define_module   |         描述         |     |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | name | varchar | 100 | 否 |         | 模块名 |
| 3 | code | varchar | 100 | 否 |         | 模块code |
| 4 | icon | varchar | 100 | 否 |         | 图标名 |
| 5 | style | varchar | 255 | 否 |         | 样式 |
| 6 | type | int | 50 | 否 |         | 类型 |
| 7 | state | tinyint | 11 | 否 |         | 状态值 |
| 8 | remark | varchar | 255 | 否 |         | 备注 |
| 9 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 10 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 11 | create_time | datetime |  | 否 |         | 创建时间 |
| 12 | update_time | datetime |  | 否 |         | 修改时间 |
| 13 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.11  em_define_permission

|         表名          |   em_define_permission   |         描述         |  权限表   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | name | varchar | 255 | 否 |         | 权限名 |
| 3 | code | varchar | 255 | 否 |         | 权限code |
| 4 | ensure | tinyint | 4 | 否 |         | 是否确认发布 |
| 5 | type | int | 255 | 否 |         | 类型 |
| 6 | state | tinyint | 11 | 否 |         | 状态值 |
| 7 | remark | varchar | 255 | 否 |         | 备注 |
| 8 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 9 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 10 | create_time | datetime |  | 否 |         | 创建时间 |
| 11 | update_time | datetime |  | 否 |         | 修改时间 |
| 12 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.12  em_define_role

|         表名          |   em_define_role   |         描述         |  角色定义表   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | name | varchar | 255 | 否 |         | 角色名 |
| 3 | code | varchar | 255 | 否 |         | 角色code |
| 4 | type | int | 255 | 否 |         | 类型 |
| 5 | state | tinyint | 11 | 否 |         | 状态值 |
| 6 | remark | varchar | 255 | 否 |         | 备注 |
| 7 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 8 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 9 | create_time | datetime |  | 否 |         | 创建时间 |
| 10 | update_time | datetime |  | 否 |         | 修改时间 |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.13  em_define_tenant

|         表名          |   em_define_tenant   |         描述         |  租户定义表   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | name | varchar | 255 | 否 |         | 租户名 |
| 3 | code | varchar | 255 | 否 |         | 租户code |
| 4 | db_code | varchar | 255 | 否 |         | 数据库标识 |
| 5 | state | tinyint | 11 | 否 |         | 状态值 |
| 6 | remark | varchar | 255 | 否 |         | 备注 |
| 7 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 8 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 9 | create_time | datetime |  | 否 |         | 创建时间 |
| 10 | update_time | datetime |  | 否 |         | 修改时间 |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.14  em_operation_log

|         表名          |   em_operation_log   |         描述         |  操作日志表   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | user_account_id | varchar | 50 | 否 |         | 用户主键 |
| 3 | ip_addr | varchar | 32 | 否 |         | ip地址 |
| 4 | class_name | varchar | 300 | 否 |         | 类名称 |
| 5 | method_name | varchar | 64 | 否 |         | 方法名称 |
| 6 | action_args | text |  | 否 |         | 方法参数 |
| 7 | result | text |  | 否 |         | 返回结果 |
| 8 | exception | text |  | 否 |         | 异常信息 |
| 9 | action | varchar | 50 | 否 |         | 操作 |
| 10 | model_name | varchar | 50 | 否 |         | 模块名称 |
| 11 | log_description | varchar | 64 | 否 |         | 日志描述 |
| 12 | signature_long | text |  | 否 |         | 请求的方法完整内容 |
| 13 | aspect_kind | varchar | 255 | 否 |         | aop类别 |
| 14 | aspect_notify_type | varchar | 255 | 否 |         | aop通知方式 |
| 15 | token_bean | varchar | 255 | 否 |         | 发起请求的token ->json |
| 16 | headers | varchar | 255 | 否 |         | 发起请求的header ->json |
| 17 | request_uri | varchar | 255 | 否 |         | 发起请求的uri |
| 18 | request_url | varchar | 255 | 否 |         | 发起请求的路径 |
| 19 | return_type_name | varchar | 255 | 否 |         | 返回值类型 |
| 20 | declared_annotations | text |  | 否 |         | 定义的注解->json |
| 21 | is_success | int | 2 | 否 |         | 是否成功 1:成功 2异常 |
| 22 | message | longtext |  | 否 |         | 异常堆栈信息 |
| 23 | state | tinyint | 11 | 否 |         | 状态值 |
| 24 | remark | varchar | 255 | 否 |         | 备注 |
| 25 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 26 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 27 | create_time | datetime |  | 否 |         | 创建时间 |
| 28 | update_time | datetime |  | 否 |         | 修改时间 |
| 29 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.15  em_role_menu

|         表名          |   em_role_menu   |         描述         |  角色授权菜单   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | define_role_id | char | 36 | 否 |         | 角色id |
| 3 | define_menu_id | char | 36 | 否 |         | 菜单id |
| 4 | type | int | 255 | 否 |         | 类型 |
| 5 | state | tinyint | 11 | 否 |         | 状态值 |
| 6 | remark | varchar | 255 | 否 |         | 备注 |
| 7 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 8 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 9 | create_time | datetime |  | 否 |         | 创建时间 |
| 10 | update_time | datetime |  | 否 |         | 修改时间 |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.16  em_role_permission

|         表名          |   em_role_permission   |         描述         |  角色权限   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | define_role_id | char | 36 | 否 |         | 角色id |
| 3 | define_permission_id | char | 36 | 否 |         | 权限id |
| 4 | type | int | 255 | 否 |         | 类型 |
| 5 | state | tinyint | 11 | 否 |         | 状态值 |
| 6 | remark | varchar | 255 | 否 |         | 备注 |
| 7 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 8 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 9 | create_time | datetime |  | 否 |         | 创建时间 |
| 10 | update_time | datetime |  | 否 |         | 修改时间 |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.17  em_user_account

|         表名          |   em_user_account   |         描述         |  用户账号表   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | user_name | varchar | 100 | 否 |         | 用户名 |
| 3 | account | varchar | 100 | 否 |         | 账号 |
| 4 | nick_name | varchar | 100 | 否 |         | 昵称 |
| 5 | avatar_url | varchar | 255 | 否 |         | 头像url |
| 6 | password | varchar | 100 | 否 |         | 密码 |
| 7 | phone | varchar | 36 | 否 |         | 手机号 |
| 8 | email | varchar | 255 | 否 |         | 邮箱地址 |
| 9 | sex | tinyint | 11 | 否 |         | 性别 |
| 10 | user_type_num | int | 11 | 否 |         | 用户类型(数值) |
| 11 | user_type | int | 255 | 否 |         | 用户类型 |
| 12 | state | tinyint | 11 | 否 |         | 状态值 |
| 13 | remark | varchar | 255 | 否 |         | 备注 |
| 14 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 15 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 16 | create_time | datetime |  | 否 |         | 创建时间 |
| 17 | update_time | datetime |  | 否 |         | 修改时间 |
| 18 | locked | tinyint | 11 | 否 |         | 是否锁定 |
| 19 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.18  em_user_department

|         表名          |   em_user_department   |         描述         |  用户与部门关联表   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | user_account_id | char | 36 | 否 |         | 用户账号id |
| 3 | define_department_id | char | 36 | 否 |         | 部门id |
| 4 | type | int | 255 | 否 |         | 类型 |
| 5 | is_manager | tinyint | 11 | 否 |         | 是否部门管理员 |
| 6 | state | tinyint | 11 | 否 |         | 状态值 |
| 7 | remark | varchar | 255 | 否 |         | 备注 |
| 8 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 9 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 10 | create_time | datetime |  | 否 |         | 创建时间 |
| 11 | update_time | datetime |  | 否 |         | 修改时间 |
| 12 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.19  em_user_group

|         表名          |   em_user_group   |         描述         |  用户组   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | define_group_id | char | 36 | 否 |         | 组别id |
| 3 | user_account_id | char | 36 | 否 |         | 账号id |
| 4 | type | varchar | 255 | 否 |         | 类别 |
| 5 | state | tinyint | 11 | 否 |         | 状态值 |
| 6 | remark | varchar | 255 | 否 |         | 备注 |
| 7 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 8 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 9 | create_time | datetime |  | 否 |         | 创建时间 |
| 10 | update_time | datetime |  | 否 |         | 修改时间 |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.20  em_user_job

|         表名          |   em_user_job   |         描述         |  用户-职务   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | user_account_id | char | 36 | 否 |         | 账号id |
| 3 | define_job_id | char | 36 | 否 |         | 职务id |
| 4 | state | tinyint | 11 | 否 |         | 状态值 |
| 5 | remark | varchar | 255 | 否 |         | 备注 |
| 6 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 7 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 8 | create_time | datetime |  | 否 |         | 创建时间 |
| 9 | update_time | datetime |  | 否 |         | 修改时间 |
| 10 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.21  em_user_role

|         表名          |   em_user_role   |         描述         |  用户角色   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | user_account_id | char | 36 | 否 |         | 账号id |
| 3 | define_role_id | char | 36 | 否 |         | 角色id |
| 4 | type | int | 255 | 否 |         | 类型 |
| 5 | state | tinyint | 11 | 否 |         | 状态值 |
| 6 | remark | varchar | 255 | 否 |         | 备注 |
| 7 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 8 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 9 | create_time | datetime |  | 否 |         | 创建时间 |
| 10 | update_time | datetime |  | 否 |         | 修改时间 |
| 11 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.22  em_user_tenant

|         表名          |   em_user_tenant   |         描述         |  用户与租户关联   |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | user_account_id | char | 36 | 否 |         | 账号id |
| 3 | define_tenant_id | char | 36 | 否 |         | 租户id |
| 4 | type | int | 255 | 否 |         | 类型 |
| 5 | is_manager | tinyint | 11 | 否 |         | 是否管理员 |
| 6 | state | tinyint | 11 | 否 |         | 状态值 |
| 7 | remark | varchar | 255 | 否 |         | 备注 |
| 8 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 9 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 10 | create_time | datetime |  | 否 |         | 创建时间 |
| 11 | update_time | datetime |  | 否 |         | 修改时间 |
| 12 | version | int | 11 | 否 |         | 版本号 |
#### 1.3.1.23  em_user_thirdparty

|         表名          |   em_user_thirdparty   |         描述         |     |      制表日期       | 2020年 10月 22 日 |                         |
| :-------------------: | :------------------: | :------------------: | :--------------------: | :-----------------: | :----------------------------: | :---------------------: |
|         编号          |       字段名称       |       字段类型       |        字段长度        |      是否主键       |            默认取值            |        字段说明         |
| 1 | fid | char | 36 | 是 |         | 主键id |
| 2 | user_account_id | char | 36 | 否 |         | 账号id |
| 3 | open_id | char | 50 | 否 |         | 第三方id |
| 4 | provider_type | varchar | 100 | 否 |         | 提供方类别 |
| 5 | type | varchar | 50 | 否 |         | 类型 |
| 6 | state | tinyint | 11 | 否 |         | 状态值 |
| 7 | remark | varchar | 255 | 否 |         | 备注 |
| 8 | create_user_id | varchar | 50 | 否 |         | 创建人id |
| 9 | last_modifyer_id | varchar | 50 | 否 |         | 最后修改人id |
| 10 | create_time | datetime |  | 否 |         | 创建时间 |
| 11 | update_time | datetime |  | 否 |         | 修改时间 |
| 12 | version | int | 11 | 否 |         | 版本号 |


### 1.3.2  数据主要索引设计

**数据主要索引**

**总体设计一览表**

| 数据表名 |          | 设计人   |      | 制表日期 | 年 月 日 |      |
| -------- | -------- | -------- | ---- | -------- | -------- | ---- |
| 编号     | 索引表名 | 索引字段 | 说明 |          |          |      |
|          |          |          |      |          |          |      |
|          |          |          |      |          |          |      |



### 1.3.3  数据库分区设计

1、依据数据库分区基本原则和分区方法，对数据表是否采用分区以及分区类型进行分析，并填写分区表总体设计一览表。

| **数据分区原则**    |                                                              |
| ------------------- | ------------------------------------------------------------ |
| 数据容量            | 表容量大于1.5G或对于OLTP系统记录数据大于1000万。             |
| 数据访问特性        | 基于表的大部分查询应用，只访问表中少量的数据。               |
| 并行操作            | 对于经常执行PDML的表（for oracle）。                         |
| 可用性              | 可用性要求很高的表。                                         |
| 可管理性            | 需要按时间段或某个范围删除成批的数据表                       |
| **分区方法**        |                                                              |
| 区间分区(range)     | 将数据按照某个值逻辑地聚集，考虑区间分区。                   |
| 散列分区(hash)      | 不能按照自然区间进行分区，考虑散列分区。散列分区个数应为2的幂，数据分布才会均匀。 |
| 列表分区(list)      | 数据中有一列有一组离散值，而且根据应用使用该列是有意义的，考虑列表分区。 |
| 组合分区(composite) | 区间分区太大，不能有效管理，考虑组合分区。                   |

**分区表总体设计一览表**

| 表名 | 分区键 | 分区方法                               | 分区规则说明 | 设计人 |
| ---- | ------ | -------------------------------------- | ------------ | ------ |
|      |        | 列表分区  组合分区  范围分区  哈希分区 |              |        |

2、依据分区索引的基本策略，对分区索引进行分析，并填写分区索引总体设计一览表。

| **分区索引策略**                            |                                                              |
| ------------------------------------------- | ------------------------------------------------------------ |
| 局部分区索引（locally  partitioned index）  | 每个分区表都有一个索引分区，而且只索引该表分区，局部索引使用底层表相同的机制分区。局部分区索引分为两类：(1)局部前缀索引（local prefixed index）：分区键在索引定义的前几列上。(2)局部非前缀索引（local non-prefixed index）：索引不以分区键作为其列列表的前几列，索引可能包含分区键列，也可能不包含。设计时要尽可能保证查询谓词允许分区消除。：如索引字段正好是分区字段，或者复合索引的第一个字段是分区字段，则建立为局部前缀索引。 |
| 全局分区索引（globally  partitioned index） | 索引按区间或散列分区，一个索引分区可指向任何（所有的）表分区。全局分区索引只有前缀全局索引（  prefixed global index）。对于其它字段的索引，建议优先考虑设计为全局分区索引，最后考虑设计为局部非前缀索引。 |

**分区索引总体设计一览表**

| 表名 | 索引名称 | 分区方法                   | 分区规则说明                    | 设计人 |
| ---- | -------- | -------------------------- | ------------------------------- | ------ |
|      |          | 局部分区索引  全局分区索引 | “局部分区索引”与表相同,无需说明 |        |



### 1.3.4  数据基本视图的设计

根据数据基本表结构的设计结果和应用系统总体设计的结果，设计系统使用的主要视图，并以表格形式给出各视图的结构设计结果。

**总体设计一览表**

| 视图名 |        | 制表日期    | 年   月 日 |      |      |
| ------ | ------ | ----------- | ---------- | ---- | ---- |
| 用途   |        | 设计人      |            |      |      |
| 编号   | 字段名 | 来源表/视图 | 取值方式   | 说明 |      |
|        |        |             |            |      |      |
|        |        |             |            |      |      |

取值方式说明该字段是对各来源表或来源视图中相应字段经过怎样的操作得到本字段的值。如果直接取值，则填写为查询。若为其它方式，则需给出计算公式和其它构造细节。



### 1.3.4  数据安全性设计

通过数据库用户标识、用户口令，保证访问数据库的权限，无特殊要求。



# 附录A：产品文档详细修改说明

| **日期** | **文档版本号** | **修改说明** | **作者** |
| -------- | -------------- | ------------ | -------- |
|          |                |              |          |
|          |                |              |          |
|          |                |              |          |
|          |                |              |          |

**填写说明：**

1. 对应前面的每次修订记录（除首次建立外），填写一张该表。

2. 根据本文档修改情况，总结修改内容点，填写表中，所有修改内容都以文字形式描述，要求覆盖所有修改内容。所有修改点应当从工作任务的角度给出描述，有些工作任务可能在正文中没有反映出来，但也要给出有关章节，不允许文档中有修改而本表中没有反映的情况。

3. 对于本次修改内容，以蓝色表示，以后再调整时，需要首先把以前的蓝色调整为黑色。

4. 为了便于管理，对应于较长时间以前的且之后又修改多次的详细修改说明表，视情况可以删除。



# 附录B：公共代码类数据取值集

**说明：**

数据结构设计时，如涉及到国家/地区名称代码、行政区划代码、货币代码、金融机构代码、客户等级代码、企业规模代码、渠道分类代码、证件类型代码、分省前缀代码时相关取值范围需参照公共代码类数据取值集，具体取值范围请参考附件